{% extends "base.html" %} {% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
{% endblock %} {% block content %}
<div>
    <h1 class="text-5xl float-left">Admin Panel</h1>
    <a
        href="{{ url_for('controller') }}"
        class="mt-3 border p-1 border-black rounded bg-accent px-5 hover:cursor-pointer hidden mx-10 md:block float-left"
        >Controller</a
    >
</div>
<br />
<br />
<br />
<a
    href="{{ url_for('controller') }}"
    class="mt-3 border p-1 border-black rounded bg-accent px-5 hover:cursor-pointer block md:hidden float-left"
    >Controller</a
>
<br />
<br />
<br />

<!-- CREATE A GRID FOR HOLDING EVERYTHING -->
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-5">
    <div
        id="sqlQueryContainer"
        class="col-span-1 md:px-10 sm:col-span-2 lg:col-start-1 xl:col-span-1"
    >
        <form action="" method="post" class="" novalidate>
            {{ form.hidden_tag() }}
            <p>
                {{ form.query.label }}<br />
                {{ form.query(cols=80, rows=10, class_="border border-black
                rounded w-full") }} {% for error in form.query.errors %}
                <span class="text-red-500">[{{error}}]</span>
                {% endfor %}
            </p>
            <br />
            <p>
                {{ form.submit(class_="border p-1 border-black rounded bg-accent
                px-5 hover:cursor-pointer") }}
            </p>
            <br />
        </form>
    </div>
    <table
        class="w-full border-2 border-black grid-cols-3 sm:col-span-2 md:col-start-3 md:col-span-2 lg:col-span-3 xl:col-span-4 bg-accent"
    >
        <tr class="">
            <th class="border-r-2 border-b-2 border-black">Tables</th>
            <td class="border-b-2 border-black">
                {% autoescape false %} {{ tableText.upper() }} {% endautoescape
                %}
            </td>
        </tr>
        <!-- Display each table w/ entry for small database -->
        {% for table in tables %}
        <tr class="">
            <th class="border-r-2 border-b-2 border-black">{{ table }}</th>
            <td class="border-b-2 border-black">
                {% for item in tableModels[table].query.paginate(page=1,
                per_page=5, error_out=False) %} {% if
                table=='collection_for_posts' %}
                <a
                    href="{{ url_for('admin', table=table, collection=item.collection_id, post=item.post_id) }}"
                    >{{ item }}</a
                >
                | {% else %}
                <a href="{{ url_for('admin', table=table, view=item.id) }}"
                    >{{ item }}</a
                >
                | {% endif %} {% endfor %}
            </td>
        </tr>
        {% endfor %}
    </table>
    <br />
    <div id="inspectDBEntryContainer" class="col-span-full">
        {% if inspection['table'] %}
        <table
            id="inspectionTable"
            class="border-2 w-full bg-accent border-black"
        >
            <tr id="inspectionObject">
                <!-- inspect entry data -->
                <td>{{ columns }}</td>
                <th class="text-left">{{ inspection['selection'] }}</th>
            </tr>
            {% for column in inspection['columns'] %}
            <tr id="{{ column }}" class="border-t-2 border-black">
                <th>{{ column }}</th>
                <td>{{ inspection['selection'][column] }}</td>
            </tr>
            {% endfor %}
        </table>
        {% endif %}
    </div>
    <br />
</div>
<script>
    const data = marked.parse(`{{ post.body }}`);
    const temp = `
                <tr>
                    <th class="border-r-2 border-b-2 border-black">{{ table }}</th>
                    <td class="border-b-2 border-black">
                        {% for item in tableModels[table].query.paginate(page=1,
                        per_page=5, error_out=False) %} {% if
                        table=='collection_for_posts' %}
                        <a
                            href="{{ url_for('admin', table=table, collection=item.collection_id, post=item.post_id) }}"
                            >{{ item }}</a
                        >
                        | {% else %}
                        <a href="{{ url_for('admin', table=table, view=item.id) }}"
                            >{{ item }}</a
                        >
                        | {% endif %} {% endfor %}
                    </td>
                </tr>
                `;
</script>
{% endblock %}
